<!doctype html>
<html lang="en" >
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>WillGive</title>
    <link rel="stylesheet" href="/bootstrap/dist/css/bootstrap.css">
    <link rel="stylesheet" href="/assets/css/simple-sidebar.css" >
    <link rel="stylesheet" href="/assets/css/customJqueryValidation.css">

    <script src="/jquery/dist/jquery.js"></script>
    <script src="/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/jquery-validation/dist/jquery.validate.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>


    <script src="/assets/js/jqgridmain.js" type="text/javascript"></script>
    <script src="/assets/js/jqgridTablednd.js" type="text/javascript"></script>
    <script src="/assets/js/jqgridContextmenu.js" type="text/javascript"></script>

    <%activeMenu = "Contact"%>
    <%include layout/navbar.ejs%>
</head>
<body>
<div class="container">
    <div class="col-md-7 columns">


        <h3>please enter the transaction ID to query charity donation</h3>
        <p>We take the charity donation security very seriously. We made all the donation transaction public and easy to track.
            WillGive wants only the best for you, so we use industry-leading Secure Sockets Layer (SSL) technology to keep personal information as secure as possible.
            Built in Stripe payment also helps protect your information by only working with partners that provide a secure and safe environment for credit card donations</em>.</p>
        <div>
            <label>transactionId</label>
            <input id="transactionId" type="text" maxlength="20" autocomplete="off" class="required" />
        </div>
        <button id="contribute_button"  class="btn btn-block btn-lg btn-primary" style="display:block;" onClick="enableAmount()">
            Search
        </button>



<%include layout/footer.ejs%>


        <div class="container" >

            <!--  <button id="getAllSpots">查询景点</button>-->


            <table id="listResult"></table>
            <table id="grid"></table>
            <div id="pagerResults"></div>
        </div>


        <script>



            $(function() {
                console.log("search transaction Now");
                var transactions=[{transaction_id:"1",amount:"20",user_name:"michael", recipient_name:"redCross",date:"2012-1-2",notes:"test"}];

                transactions.push({transaction_id:"2",amount:"20",user_name:"michael", recipient_name:"redCross",date:"2012-1-2",notes:"test"});
                transactions.push({transaction_id:"3",amount:"20",user_name:"michael", recipient_name:"redCross",date:"2012-1-2",notes:"test"});
                transactions.push({transaction_id:"4",amount:"20",user_name:"michael", recipient_name:"redCross",date:"2012-1-2",notes:"test"});
                transactions.push({transaction_id:"5",amount:"20",user_name:"michael", recipient_name:"redCross",date:"2012-1-2",notes:"test"});
                /*
                $.get("/services/getAll/sceneryspots", function (results) {
                    spots = []; //results is an object, not an array
                    for (i in results) {
                        spots.push(results[i]);
                    }*/

                    console.dir(transactions);
                    jQuery(document).ready( function() {
                        jQuery("#listResult").jqGrid ( {
                            datatype: "local",
                            data: transactions,
                            colNames: ['transaction_id','amount', 'user_name', 'recipient_name', 'date', 'notes'],
                            colModel: [
                                {name: 'transaction_id', index: 'transaction_id', align: "center", editable: true, sortable: true},
                                {name: 'amount', index: 'amount', align: "center", editable: true, sortable: true},
                                {name: 'user_name', index: 'user_name', align: "center", editable: true, sortable: true},
                                {name: 'recipient_name', index: 'recipient_name', align: "center", editable: true, sortable: true},
                                {name: 'date', index: 'date', align: "center",   editable: true, sortable: true},
                                {name: 'notes', index: 'notes', align: "center", editable:true, sortable: true},
                            ],
                            rowNum:10,
                            rowList:[10,20,30],
                            sortname: 'transaction_id',
                            viewrecords: true,
                            sortorder: "desc",

                            onclickSubmit: function(options, postdata) {

                                alert("hahaha");
                                var idName= $(this).jqGrid('getGridParam').prmNames.id;

                                // [UPDATED]
                                if (postdata[idName] === undefined) {
                                    var idInPostdata = this.id + "_id";
                                    postdata[idName] = postdata[idInPostdata];
                                    postdata['row'] = postdata[idInPostdata];
                                }

                                $('#mygrid').jqGrid('setRowData', postdata.row, postdata);

                                if (options.closeAfterEdit) {
                                    $.jgrid.hideModal('#editmod' + gridId, {
                                        gb: '#gbox_' + gridId,
                                        jqm: options.jqModal,
                                        onClose: options.onClose
                                    });
                                }

                                options.processing = true;

                                return {};
                            },




                            caption: "donation listings",
                            width: 770,
                            height: "100%"
                        });

                        //jQuery("#listResult").jqGrid('navGrid',"#pagerResults",{edit:false,add:false,del:true});
                       // jQuery("#listResult").jqGrid('inlineNav',"#pagerResults");

                    });

                })



        </script>


</body>

</html>